PROGRAM=life.exe
import CXX=c++
import CXXFLAGS=-pipe -O3 -flto -Wall -Wextra -Wpedantic -Werror
import LDFLAGS=-flto

CXXFLAGS+=-I include

ifeq ($(TUP_PLATFORM),linux)
	LDFLAGS+=-lraylib
else
	LDFLAGS+=-L lib -lraylib -lopengl32 -lgdi32 -lwinmm -lws2_32
endif

!cxx = |> ^cj^ $(CXX) -c -o %o %f $(CXXFLAGS) |>
!ld = |> ^cj^ $(CXX) -o %o %f $(LDFLAGS) |>

: foreach src/*.cpp |> !cxx |> obj/%B.o {objs}
: {objs} |> !ld |> $(PROGRAM)
